<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tickedify - Smart Task Management</title>
    <meta name="description" content="Tickedify your tasks with smart task management. Get things done efficiently with projects, contexts, and smart scheduling.">
    <meta name="keywords" content="task management, productivity, todo, gtd, project management">
    <script src="https://unpkg.com/heroicons@2.0.18/24/outline/index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css?v=0.4.99">
</head>
<body>
    <div id="app">
        <!-- Sidebar Overlay for mobile -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        
        <div class="app-layout">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <button class="sidebar-toggle" id="sidebar-toggle" title="Collapse/expand sidebar">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="app-logo">
                        <img src="Tickedify logo.png" alt="Tickedify" class="logo-image">
                    </div>
                    <div class="user-section" id="user-section">
                        <!-- Will be populated by JavaScript based on auth state -->
                        <div class="auth-buttons" id="auth-buttons">
                            <button class="btn-auth btn-login" id="btn-login">Log in</button>
                            <button class="btn-auth btn-register" id="btn-register">Register</button>
                        </div>
                        <div class="user-info" id="user-info" style="display: none;">
                            <div class="user-info-top">
                                <div class="user-avatar"><i class="fas fa-user"></i></div>
                                <div class="user-details">
                                    <span class="user-name" id="user-name"></span>
                                    <span class="user-email" id="user-email"></span>
                                </div>
                                <button class="btn-logout" id="btn-logout">Log out</button>
                            </div>
                            <div class="user-import-email" id="user-import-email" style="display: none;">
                                <div class="import-email-container">
                                    <span class="import-label">Email import:</span>
                                    <a href="#" class="import-email-link" id="import-email-link"></a>
                                    <button class="btn-copy" id="btn-copy-import" title="Copy to clipboard"><i class="fas fa-copy"></i></button>
                                    <button class="btn-help" id="btn-email-help" title="Email syntax help"><i class="fas fa-question-circle"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="version-info">
                        <span class="version-number" id="version-number">v0.18.2</span>
                        <a href="/changelog" target="_blank" class="changelog-link" title="See what's new">(Changelog)</a>
                    </div>
                </div>
                

                <!-- Welkomstbericht voor niet-ingelogde gebruikers -->
                <div class="welcome-message" id="welcome-message" style="display: none;">
                    <div class="welcome-content">
                        <h2>Welcome to Tickedify</h2>
                        <p>Smart task management based on the "Master of Your Time" methodology.</p>
                        
                        <div class="features-list">
                            <div class="feature">
                                <span class="feature-icon"><i class="fas fa-list-check"></i></span>
                                <span>Structured task management</span>
                            </div>
                            <div class="feature">
                                <span class="feature-icon"><i class="fas fa-redo"></i></span>
                                <span>Recurring tasks</span>
                            </div>
                            <div class="feature">
                                <span class="feature-icon"><i class="fas fa-calendar"></i></span>
                                <span>Daily planning</span>
                            </div>
                            <div class="feature">
                                <span class="feature-icon"><i class="fas fa-folder"></i></span>
                                <span>Projects & contexts</span>
                            </div>
                        </div>
                        
                        <p class="login-prompt">
                            <strong>Log in or register</strong> to start organizing your tasks.
                        </p>
                    </div>
                </div>

                <!-- Search Block -->
                <div class="sidebar-search-block">
                    <input type="text"
                           id="sidebar-search-input"
                           placeholder="Search"
                           class="sidebar-search-input">
                </div>

                <div class="sidebar-content">
                    <!-- Standaard lijsten -->
                    <div class="lijst-sectie">
                        <div class="lijst-item actief" data-lijst="inbox">
                            <div class="lijst-icon"><i class="fas fa-inbox"></i></div>
                            <span class="lijst-naam">Inbox<span class="task-count"></span></span>
                        </div>
                        <div class="lijst-item" data-lijst="acties">
                            <div class="lijst-icon"><i class="fas fa-list-check"></i></div>
                            <span class="lijst-naam">Actions<span class="task-count"></span></span>
                        </div>
                        <div class="lijst-item" data-lijst="projecten">
                            <div class="lijst-icon"><i class="fas fa-folder"></i></div>
                            <span class="lijst-naam">Projects<span class="task-count"></span></span>
                        </div>
                        <div class="lijst-item" data-lijst="opvolgen">
                            <div class="lijst-icon"><i class="fas fa-clock"></i></div>
                            <span class="lijst-naam">Follow-up<span class="task-count"></span></span>
                        </div>
                        <div class="lijst-item" data-lijst="uitgesteld">
                            <div class="lijst-icon"><i class="fas fa-pause-circle"></i></div>
                            <span class="lijst-naam">Postponed<span class="task-count"></span></span>
                        </div>
                        <div class="lijst-item" data-lijst="afgewerkte-taken">
                            <div class="lijst-icon"><i class="fas fa-check"></i></div>
                            <span class="lijst-naam">Completed</span>
                        </div>
                        <div class="lijst-item" data-lijst="prullenbak">
                            <div class="lijst-icon"><i class="fas fa-trash"></i></div>
                            <span class="lijst-naam">Trash<span class="task-count"></span></span>
                        </div>
                    </div>

                    <!-- Voormalige Tools items - nu direct zichtbaar -->
                    <div class="lijst-sectie">
                        <div class="lijst-item" data-lijst="dagelijkse-planning">
                            <div class="lijst-icon"><i class="fas fa-calendar"></i></div>
                            <span class="lijst-naam">Daily Planning</span>
                        </div>
                        <div class="lijst-item" data-tool="contextenbeheer">
                            <div class="lijst-icon"><i class="fas fa-tag"></i></div>
                            <span class="lijst-naam">Context Management</span>
                        </div>
                        <div class="lijst-item" data-tool="csv-import">
                            <div class="lijst-icon"><i class="fas fa-file-csv"></i></div>
                            <span class="lijst-naam">CSV Import</span>
                        </div>
                        <!-- TEMPORARILY HIDDEN - Feature 063 - Restore by uncommenting
                        <div class="lijst-item nav-section-gap" data-tool="settings" id="settings-link">
                            <div class="lijst-icon"><i class="fas fa-cog"></i></div>
                            <span class="lijst-naam">Settings</span>
                        </div>
                        END TEMPORARILY HIDDEN - Feature 063 -->
                    </div>

                    <!-- TEMPORARILY HIDDEN - Feature 063 - Restore by uncommenting
                    Instructional Video
                    <div class="lijst-sectie">
                        <a href="#" id="openOnboardingVideoLink" class="lijst-item">
                            <div class="lijst-icon"><i class="fas fa-video"></i></div>
                            <span class="lijst-naam">Instruction Video</span>
                        </a>
                    </div>
                    END TEMPORARILY HIDDEN - Feature 063 -->
                </div>
            </aside>

            <!-- Main content -->
            <main class="main-content">
                <header class="main-header">
                    <h1 id="page-title">Inbox</h1>
                </header>

                <div class="content-area">
                    <div class="taak-input-container" id="taak-input-container">
                        <input type="text" id="taakInput" placeholder="New task..." autofocus>
                        <button id="toevoegBtn">Add</button>
                        <button id="testTakenBtn" class="test-button" style="display: none;">+ Test Tasks</button>
                        <!-- Delete all knop wordt dynamisch toegevoegd door JavaScript -->

                        <!-- Voice Mode Toggle -->
                        <div id="voice-mode-container" style="display: none;">
                            <button id="voice-toggle-btn" class="voice-toggle-btn" title="Voice Mode - Process inbox with voice commands">
                                <i class="fas fa-microphone"></i>
                                <span class="voice-toggle-text">Voice</span>
                            </button>
                            <div class="voice-mode-indicator" id="voice-mode-indicator" style="display: none;">
                                <div class="voice-listening-pulse"></div>
                                <span class="voice-status-text">Listening...</span>
                            </div>
                        </div>
                    </div>

                    <div class="taken-container">
                        <ul id="takenLijst"></ul>
                    </div>
                </div>
            </main>
        </div>
        
        <!-- Keyboard Shortcuts Footer -->
        <footer class="shortcuts-footer" id="shortcuts-footer">
            <div class="shortcuts-content">
                <span class="shortcut-item"><kbd>Shift+F12</kbd> New task</span>
                <span class="shortcut-item"><kbd>?</kbd> Help</span>
                <span class="shortcut-item"><kbd>ESC</kbd> Close</span>
            </div>
        </footer>
    </div>

    <!-- Quick Add Modal -->
    <div id="quickAddModal" class="popup-overlay quick-add-overlay" style="display: none;">
        <div class="popup-content quick-add-content">
            <h3>Add new task</h3>
            <div class="form-groep">
                <input type="text" id="quickAddInput" placeholder="Task name..." autofocus>
            </div>
            <div class="quick-add-actions">
                <button id="quickAddCancel" class="btn-cancel">Cancel</button>
                <button id="quickAddOk" class="btn-primary">Add</button>
            </div>
        </div>
    </div>

    <!-- Keyboard Help Modal -->
    <div id="keyboardHelpModal" class="popup-overlay" style="display: none;">
        <div class="popup-content keyboard-help-content">
            <h3><i class="fas fa-keyboard"></i> Keyboard Shortcuts</h3>
            <div class="shortcuts-grid">
                <div class="shortcuts-category">
                    <h4>General</h4>
                    <div class="shortcut-list">
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>SHIFT+F12</kbd></span>
                            <span class="shortcut-desc">Add new task</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>F1</kbd></span>
                            <span class="shortcut-desc">Show this help</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>ESC</kbd></span>
                            <span class="shortcut-desc">Close modal</span>
                        </div>
                    </div>
                </div>
                <div class="shortcuts-category">
                    <h4>Planning</h4>
                    <div class="shortcut-list">
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>Tab</kbd></span>
                            <span class="shortcut-desc">Navigate between fields</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>+</kbd></span>
                            <span class="shortcut-desc">New project/context</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>Enter</kbd></span>
                            <span class="shortcut-desc">Save</span>
                        </div>
                    </div>
                </div>
                <div class="shortcuts-category">
                    <h4>F-keys (Planning Popup)</h4>
                    <div class="shortcut-list">
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>F2</kbd></span>
                            <span class="shortcut-desc">Project dropdown</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>F3</kbd></span>
                            <span class="shortcut-desc">Date = today</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>F4</kbd></span>
                            <span class="shortcut-desc">Date = tomorrow</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>F6</kbd></span>
                            <span class="shortcut-desc">Datum picker</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>F7</kbd></span>
                            <span class="shortcut-desc">Context dropdown</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>F8</kbd></span>
                            <span class="shortcut-desc">Cycle duration (5â†’10â†’15...â†’120)</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>F9</kbd></span>
                            <span class="shortcut-desc">Focus notes</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>F10</kbd></span>
                            <span class="shortcut-desc">Configure Recurrence</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>SHIFT+F9</kbd></span>
                            <span class="shortcut-desc">Set priority</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>SHIFT+F10</kbd></span>
                            <span class="shortcut-desc">Add subtask</span>
                        </div>
                    </div>
                </div>
                <div class="shortcuts-category">
                    <h4>Quick move (SHIFT+F)</h4>
                    <div class="shortcut-list">
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>SHIFT+F1</kbd></span>
                            <span class="shortcut-desc">Follow-up</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>SHIFT+F2</kbd></span>
                            <span class="shortcut-desc">Weekly</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>SHIFT+F3</kbd></span>
                            <span class="shortcut-desc">Monthly</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>SHIFT+F4</kbd></span>
                            <span class="shortcut-desc">Quarterly</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>SHIFT+F6</kbd></span>
                            <span class="shortcut-desc">Bi-annual</span>
                        </div>
                        <div class="shortcut-row">
                            <span class="shortcut-keys"><kbd>SHIFT+F7</kbd></span>
                            <span class="shortcut-desc">Yearly</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="popup-acties">
                <button id="keyboardHelpClose" class="btn-primary">Close</button>
            </div>
        </div>
    </div>

    <!-- Email Import Help Modal -->
    <div id="emailHelpModal" class="popup-overlay" style="display: none;">
        <div class="popup-content email-help-content">
            <h3><i class="fas fa-envelope"></i> Email Import Syntax Help</h3>
            <div id="emailHelpContent" class="markdown-content">
                <p>Loading...</p>
            </div>
            <div class="popup-acties">
                <button id="emailHelpClose" class="btn-primary">Close</button>
            </div>
        </div>
    </div>

    <!-- Planning Popup -->
    <div id="planningPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3>Plan task</h3>
            <p class="keyboard-help"><i class="fas fa-lightbulb"></i> Keyboard: Tab = navigate, + = new item, Esc = cancel, Enter = save</p>

            <div class="form-groep">
                <label>Task name:</label>
                <div class="checkbox-input-wrapper">
                    <input type="checkbox" id="completeTaskCheckbox">
                    <input type="text" id="taakNaamInput" required>
                </div>
            </div>

            <div class="planning-opties">
                <div class="optie-groep">
                    <h4>Create action:</h4>
                    <div class="form-groep">
                        <label>Project:</label>
                        <div class="select-met-toevoeg">
                            <select id="projectSelect">
                                <option value="">No project</option>
                            </select>
                            <button id="nieuwProjectBtn" type="button" tabindex="-1">+</button>
                        </div>
                    </div>

                    <div class="form-groep">
                        <label>Appear date: <span class="required">*</span></label>
                        <input type="date" id="verschijndatum" required>
                    </div>

                    <div class="form-groep">
                        <label>Context: <span class="required">*</span></label>
                        <div class="select-met-toevoeg">
                            <select id="contextSelect" required>
                                <option value="">Select context...</option>
                            </select>
                            <button id="nieuweContextBtn" type="button" tabindex="-1">+</button>
                        </div>
                    </div>

                    <div class="form-groep" id="prioriteitFormGroep">
                        <label>Priority:</label>
                        <select id="prioriteitSelect" class="prioriteit-dropdown">
                            <option value="laag">âšª Low</option>
                            <option value="gemiddeld" selected>ðŸŸ  Medium</option>
                            <option value="hoog">ðŸ”´ High</option>
                        </select>
                    </div>

                    <div class="form-groep">
                        <label>Estimated duration (minutes): <span class="required">*</span></label>
                        <input type="number" id="duur" min="1" step="1" required>
                    </div>

                    <div class="form-groep">
                        <label>Recurrence:</label>
                        <div class="herhaling-selectie">
                            <input type="text" id="herhalingDisplay" readonly placeholder="No recurrence" onclick="app.openHerhalingPopup()">
                            <button type="button" id="herhalingBtn" onclick="app.openHerhalingPopup()">Configure</button>
                            <input type="hidden" id="herhalingSelect" value="">
                        </div>
                    </div>
                </div>
                
                <div class="optie-groep">
                    <h4>Or defer to:</h4>
                    <div class="verplaats-knoppen">
                        <button class="verplaats-btn" data-lijst="opvolgen">Follow-up</button>
                        <button class="verplaats-btn" data-lijst="uitgesteld-wekelijks">Weekly</button>
                        <button class="verplaats-btn" data-lijst="uitgesteld-maandelijks">Monthly</button>
                        <button class="verplaats-btn" data-lijst="uitgesteld-3maandelijks">Quarterly</button>
                        <button class="verplaats-btn" data-lijst="uitgesteld-6maandelijks">Bi-annual</button>
                        <button class="verplaats-btn" data-lijst="uitgesteld-jaarlijks">Yearly</button>
                    </div>
                </div>
            </div>
            
            <!-- Volledige breedte velden -->
            <div class="form-groep">
                <label>Notes:</label>
                <textarea id="opmerkingen" rows="3" placeholder="Additional information, notes or details..."></textarea>
            </div>

            <div class="form-groep" id="subtaken-sectie" style="display: none;">
                <div class="subtaken-header">
                    <label>Subtasks:</label>
                    <span class="subtaken-progress" id="subtaken-progress" style="display: none;"></span>
                    <div class="select-met-toevoeg">
                        <div style="flex: 1;"></div>
                        <button type="button" id="subtaak-add-btn" title="Add new subtask">+</button>
                    </div>
                </div>
                
                <div class="subtaken-container" id="subtaken-container">
                    <div class="subtaken-empty" id="subtaken-empty">
                        <i class="fas fa-tasks"></i>
                        <span>No subtasks - click + to add</span>
                    </div>
                    
                    <div class="subtaken-lijst" id="subtaken-lijst">
                        <!-- Subtaken worden hier via JavaScript toegevoegd -->
                    </div>
                    
                    <div class="subtaak-input-container" id="subtaak-input-container" style="display: none;">
                        <input type="text" id="subtaak-input" placeholder="New subtask..." maxlength="500">
                        <div class="subtaak-input-acties">
                            <button type="button" class="subtaak-save-btn" id="subtaak-save-btn" title="Save">
                                <i class="fas fa-check"></i>
                            </button>
                            <button type="button" class="subtaak-cancel-btn" id="subtaak-cancel-btn" title="Cancel">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-groep" id="bijlagen-sectie">
                <div class="bijlagen-header">
                    <label>Attachments:</label>
                    <span class="storage-usage" id="storage-usage" style="display: none;"></span>
                </div>
                
                <div class="bijlagen-upload" id="bijlagen-upload">
                    <div class="upload-dropzone" id="upload-dropzone">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Drag file here or <span class="upload-link">click to select</span></p>
                        <small class="upload-limits" id="upload-limits">Max 4.5MB, 1 attachment per task (free)</small>
                    </div>
                    <input type="file" id="file-input" style="display: none;" accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.csv,.jpg,.jpeg,.png,.gif,.webp,.svg,.zip,.rar,.7z,.json,.xml">
                </div>
                
                <div class="bijlagen-lijst" id="bijlagen-lijst" style="display: none;">
                    <!-- Bijlagen worden hier dynamisch toegevoegd -->
                </div>
                
                <div class="upgrade-prompt" id="upgrade-prompt" style="display: none;">
                    <div class="upgrade-content">
                        <i class="fas fa-star"></i>
                        <div class="upgrade-text">
                            <strong>Upgrade to Premium</strong>
                            <p>Standard (â‚¬7/month, â‚¬70/year): 100MB storage | Unlimited (â‚¬8/month, â‚¬80/year): Unlimited attachments</p>
                        </div>
                        <button class="upgrade-btn" id="upgrade-btn">View options</button>
                    </div>
                </div>
            </div>
            
            <div class="popup-acties">
                <button type="button" id="sluitPopupBtn">Cancel</button>
                <button type="button" id="verwijderInboxTaakBtn" class="verwijder-btn" style="display: none;">Delete</button>
                <button type="button" id="maakActieBtn" class="actie-btn">Create action</button>
                <button type="button" id="createActionBtn" class="actie-btn create-action-btn" style="display: none;">Create Action</button>
            </div>
        </div>
    </div>

    <!-- Herhaling Popup -->
    <div id="herhalingPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content herhaling-popup">
            <h3>Configure Recurrence</h3>
            
            <div class="herhaling-configuratie">
                <div class="herhaling-optie-groep">
                    <input type="radio" id="herhalingNone" name="herhalingType" value="" checked>
                    <label for="herhalingNone">No recurrence</label>
                </div>
                
                <div class="herhaling-optie-groep">
                    <input type="radio" id="herhalingDaily" name="herhalingType" value="daily">
                    <label for="herhalingDaily">Daily - Every</label>
                    <input type="number" id="dailyInterval" min="1" max="30" value="1" disabled>
                    <span>days</span>
                </div>
                
                <div class="herhaling-optie-groep">
                    <input type="radio" id="herhalingWorkdays" name="herhalingType" value="workdays">
                    <label for="herhalingWorkdays">Every weekday (Mon-Fri)</label>
                </div>
                
                <div class="herhaling-optie-groep">
                    <input type="radio" id="herhalingWeekly" name="herhalingType" value="weekly">
                    <label for="herhalingWeekly">Weekly - Every</label>
                    <input type="number" id="weeklyInterval" min="1" max="12" value="1" disabled>
                    <span>weeks on:</span>
                    <div class="weekdag-checkboxes">
                        <label><input type="checkbox" value="1" disabled> Mon</label>
                        <label><input type="checkbox" value="2" disabled> Tue</label>
                        <label><input type="checkbox" value="3" disabled> Wed</label>
                        <label><input type="checkbox" value="4" disabled> Thu</label>
                        <label><input type="checkbox" value="5" disabled> Fri</label>
                        <label><input type="checkbox" value="6" disabled> Sat</label>
                        <label><input type="checkbox" value="0" disabled> Sun</label>
                    </div>
                </div>
                
                <div class="herhaling-optie-groep">
                    <input type="radio" id="herhalingMonthly" name="herhalingType" value="monthly">
                    <label for="herhalingMonthly">Monthly - Day</label>
                    <input type="number" id="monthlyDay" min="1" max="31" value="1" disabled>
                    <span>of every</span>
                    <input type="number" id="monthlyInterval" min="1" max="12" value="1" disabled>
                    <span>months</span>
                </div>
                
                <div class="herhaling-optie-groep">
                    <input type="radio" id="herhalingMonthlyWeekday" name="herhalingType" value="monthly-weekday">
                    <label for="herhalingMonthlyWeekday">Monthly - The</label>
                    <select id="monthlyWeekdayPosition" disabled>
                        <option value="first">first</option>
                        <option value="second">second</option>
                        <option value="third">third</option>
                        <option value="fourth">fourth</option>
                        <option value="last">last</option>
                    </select>
                    <select id="monthlyWeekdayDay" disabled>
                        <option value="1">Monday</option>
                        <option value="2">Tuesday</option>
                        <option value="3">Wednesday</option>
                        <option value="4">Thursday</option>
                        <option value="5">Friday</option>
                        <option value="6">Saturday</option>
                        <option value="0">Sunday</option>
                        <option value="workday">workday</option>
                    </select>
                    <span>of every</span>
                    <input type="number" id="monthlyWeekdayInterval" min="1" max="12" value="1" disabled>
                    <span>months</span>
                </div>
                
                <div class="herhaling-optie-groep">
                    <input type="radio" id="herhalingYearly" name="herhalingType" value="yearly">
                    <label for="herhalingYearly">Yearly - Every</label>
                    <select id="yearlyDay" disabled>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select id="yearlyMonth" disabled>
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <span>of every</span>
                    <input type="number" id="yearlyInterval" min="1" max="5" value="1" disabled>
                    <span>year</span>
                </div>
                
                <div class="herhaling-optie-groep">
                    <input type="radio" id="herhalingYearlySpecial" name="herhalingType" value="yearly-special">
                    <label for="herhalingYearlySpecial">Yearly special - The</label>
                    <select id="yearlySpecialType" disabled>
                        <option value="first-workday">first workday of the year</option>
                        <option value="last-workday">last workday of the year</option>
                    </select>
                    <span>of every</span>
                    <input type="number" id="yearlySpecialInterval" min="1" max="5" value="1" disabled>
                    <span>year</span>
                </div>
                
                <div class="herhaling-optie-groep">
                    <input type="radio" id="herhalingEvent" name="herhalingType" value="gebeurtenis-gebaseerd">
                    <label for="herhalingEvent">Event-based -</label>
                    <input type="number" id="eventDays" min="1" max="365" value="1" disabled>
                    <span>days</span>
                    <select id="eventDirection" disabled>
                        <option value="voor">before</option>
                        <option value="na">after</option>
                    </select>
                    <input type="text" id="eventName" placeholder="e.g. webinar, meeting..." disabled>
                </div>
            </div>
            
            <div class="popup-acties">
                <button type="button" id="herhalingOkBtn" class="actie-btn">OK</button>
                <button type="button" id="sluitHerhalingPopupBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Gebeurtenis Datum Popup -->
    <div id="eventDatePopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3>Recurring task completed</h3>
            <p id="eventPromptText">When is the next event?</p>
            
            <div class="form-groep">
                <label id="eventDateLabel">Event date:</label>
                <input type="date" id="nextEventDate" required>
            </div>
            
            <div class="popup-acties">
                <button id="eventDateOkBtn" class="actie-btn">OK</button>
                <button id="eventDateCancelBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Global Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-progress-text" id="loadingProgressText"></div>
        </div>
    </div>

    <!-- Custom Input Modal -->
    <div id="inputModal" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3 id="inputModalTitle">Input</h3>
            <div class="form-groep">
                <label id="inputModalLabel">Enter value:</label>
                <input type="text" id="inputModalInput" required>
            </div>
            <div class="popup-acties">
                <button id="inputModalCancel">Cancel</button>
                <button id="inputModalOk" class="actie-btn">OK</button>
            </div>
        </div>
    </div>

    <!-- Project Modal -->
    <div id="projectModal" class="popup-overlay" style="display: none;">
        <div class="popup-content project-modal-content">
            <h3 id="projectModalTitle">Project</h3>
            <div class="form-groep">
                <label for="projectModalNaam">Name:</label>
                <input type="text" id="projectModalNaam" required>
            </div>
            <div class="form-groep">
                <label for="projectModalDueDate">Deadline:</label>
                <input type="date" id="projectModalDueDate">
            </div>
            <div class="form-groep">
                <label for="projectModalOpmerkingen">Notes:</label>
                <textarea id="projectModalOpmerkingen" rows="4" placeholder="Optional notes about this project..."></textarea>
            </div>
            <div class="popup-acties">
                <button id="projectModalCancel">Cancel</button>
                <button id="projectModalOk" class="actie-btn">Save</button>
            </div>
        </div>
    </div>

    <!-- Custom Confirm Modal -->
    <div id="confirmModal" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3 id="confirmModalTitle">Confirm</h3>
            <p id="confirmModalMessage">Are you sure?</p>
            <div class="popup-acties">
                <button id="confirmModalCancel">Cancel</button>
                <button id="confirmModalOk" class="actie-btn">OK</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="popup-overlay" style="display: none;">
        <div class="popup-content auth-modal">
            <h3>Log in</h3>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email:</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password:</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <div class="forgot-password-wrapper">
                    <a href="/forgot-password" class="forgot-password-link">Forgot your password?</a>
                </div>
                <div class="popup-acties">
                    <button type="button" id="loginCancel">Cancel</button>
                    <button type="submit" class="actie-btn" id="loginSubmit">Log in</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="popup-overlay" style="display: none;">
        <div class="popup-content auth-modal">
            <h3>Create Account</h3>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">Name:</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email:</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password:</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="registerPassword" required>
                        <button type="button" id="toggle-password-visibility" aria-label="Show password" title="Show password">
                            <i class="fas fa-eye" id="toggle-icon"></i>
                        </button>
                    </div>
                    <div class="password-requirements">
                        <p>Password requirements:</p>
                        <ul>
                            <li id="req-length" class="password-requirement neutral">Minimum 8 characters</li>
                            <li id="req-uppercase" class="password-requirement neutral">At least 1 uppercase letter</li>
                            <li id="req-digit" class="password-requirement neutral">At least 1 digit</li>
                            <li id="req-special" class="password-requirement neutral">At least 1 special character</li>
                        </ul>
                    </div>
                </div>
                <div class="form-group">
                    <label for="registerPasswordConfirm">Confirm password:</label>
                    <input type="password" id="registerPasswordConfirm" required>
                </div>
                <div class="popup-acties">
                    <button type="button" id="registerCancel">Cancel</button>
                    <button type="submit" class="actie-btn" id="registerSubmit">Create Account</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Clear Planning Confirmation Modal -->
    <div class="popup-overlay" id="clearPlanningModal" style="display: none;">
        <div class="popup-content clear-planning-popup">
            <h2>Clear Planning</h2>
            <p>Are you sure you want to clear the planning?</p>
            <div class="clear-options">
                <label class="checkbox-option">
                    <input type="checkbox" id="clearTaken" checked>
                    <span>Remove tasks</span>
                </label>
                <label class="checkbox-option">
                    <input type="checkbox" id="clearPauzes" checked>
                    <span>Remove breaks</span>
                </label>
                <label class="checkbox-option">
                    <input type="checkbox" id="clearGeblokkeerd" checked>
                    <span>Remove blocked time</span>
                </label>
            </div>
            <div class="popup-acties clear-planning-actions">
                <button type="button" id="clearPlanningCancel" class="btn-cancel">Cancel</button>
                <button type="button" id="clearPlanningConfirm" class="btn-danger">Clear</button>
            </div>
        </div>
    </div>

    <!-- Preview Modal voor bijlagen -->
    <div id="previewModal" class="popup-overlay preview-modal" style="display: none;">
        <div class="preview-modal-content">
            <div class="preview-header">
                <span class="preview-filename" id="previewFilename"></span>
                <button class="preview-close" id="previewClose" title="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="preview-body">
                <div class="preview-container" id="previewContainer">
                    <!-- Preview content will be loaded here -->
                </div>
                <div class="preview-navigation" id="previewNavigation" style="display: none;">
                    <button class="preview-nav-btn" id="previewPrevious" title="Vorige bijlage">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <span class="preview-counter" id="previewCounter"></span>
                    <button class="preview-nav-btn" id="previewNext" title="Volgende bijlage">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- TEMPORARILY HIDDEN - Feature 063 - Restore by uncommenting
    Onboarding Video Popup (Feature 014)
    <div id="onboardingVideoPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content onboarding-video-content">
            <button class="close-video-btn" aria-label="Sluiten">&times;</button>
            <h2>Welcome to Tickedify</h2>
            <div class="video-container">
                <iframe id="onboardingVideoIframe"
                        width="560" height="315"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen"
                        allowfullscreen>
                </iframe>
            </div>
            <p class="fallback-message" style="display: none;">
                Nog geen welkomstvideo beschikbaar
            </p>
        </div>
    </div>
    END TEMPORARILY HIDDEN - Feature 063 -->

    <!-- Floating Drop Panel voor uitgesteld drag & drop -->
    <div class="floating-drop-panel" id="floatingDropPanel" style="display: none;">
        <div class="drop-panel-content">
            <div class="drop-panel-header">
                <span>Drag here:</span>
            </div>
            <div class="drop-zones">
                <div class="drop-zone-item" data-target="inbox">
                    <i class="fas fa-inbox"></i>
                    <span>Inbox</span>
                </div>
                <div class="drop-zone-item" data-target="opvolgen">
                    <i class="fas fa-clock"></i>
                    <span>Follow-up</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Drop Panel voor acties drag & drop naar dagelijkse planning -->
    <div class="floating-drop-panel acties-floating-panel" id="actiesFloatingPanel" style="display: none;">
        <div class="drop-panel-content">
            <div class="drop-panel-header">
                <span>Drag task to:</span>
            </div>
            
            <!-- Huidige Week Sectie -->
            <div class="week-section">
                <h5>This week</h5>
                <div class="week-days" id="actiesHuidigeWeek">
                    <!-- Dynamisch gegenereerd -->
                </div>
            </div>
            
            <!-- Volgende Week Sectie -->
            <div class="week-section">
                <h5>Next week</h5>
                <div class="week-days" id="actiesVolgendeWeek">
                    <!-- Dynamisch gegenereerd -->
                </div>
            </div>

            <!-- Derde Week Sectie (Ctrl-toets activated) -->
            <div class="week-section" id="actiesDerdeWeekSection" style="display: none;">
                <h5>Week after</h5>
                <div class="week-days" id="actiesDerdeWeek">
                    <!-- Dynamisch gegenereerd via Ctrl-toets -->
                </div>
            </div>

            <!-- Lijsten Sectie -->
            <div class="lists-section">
                <h5>Or move to list:</h5>
                <div class="list-zones">
                    <div class="drop-zone-item" data-target="opvolgen" data-type="list">
                        <i class="fas fa-clock"></i>
                        <span>Follow-up</span>
                    </div>
                    
                    <!-- Extra ruimte tussen Opvolgen en Uitgesteld lijsten -->
                    <div class="list-separator"></div>
                    
                    <div class="drop-zone-item" data-target="uitgesteld-wekelijks" data-type="list">
                        <i class="fas fa-pause-circle"></i>
                        <span>Weekly</span>
                    </div>
                    <div class="drop-zone-item" data-target="uitgesteld-maandelijks" data-type="list">
                        <i class="fas fa-pause-circle"></i>
                        <span>Monthly</span>
                    </div>
                    <div class="drop-zone-item" data-target="uitgesteld-3maandelijks" data-type="list">
                        <i class="fas fa-pause-circle"></i>
                        <span>Quarterly</span>
                    </div>
                    <div class="drop-zone-item" data-target="uitgesteld-6maandelijks" data-type="list">
                        <i class="fas fa-pause-circle"></i>
                        <span>Bi-annual</span>
                    </div>
                    <div class="drop-zone-item" data-target="uitgesteld-jaarlijks" data-type="list">
                        <i class="fas fa-pause-circle"></i>
                        <span>Yearly</span>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Acties Drag & Drop Overlay -->
    <div class="acties-drag-overlay" id="actiesDragOverlay" style="display: none;">
        <div class="acties-drop-panel">
            <div class="drop-panel-header">
                <span>Drag here:</span>
            </div>
            
            <!-- Grid layout voor alle drop zones -->
            <div class="acties-drop-grid">
                <!-- Huidige week sectie - bovenaan -->
                <div class="drop-section week-section">
                    <h4>This week</h4>
                    <div class="drop-zones-row week-days" id="huidigeWeekZones">
                        <!-- Week dagen worden dynamisch gegenereerd -->
                    </div>
                </div>
                
                <!-- Next week sectie - tweede -->
                <div class="drop-section week-section">
                    <h4>Next week</h4>
                    <div class="drop-zones-row week-days" id="volgendeWeekZones">
                        <!-- Week dagen worden dynamisch gegenereerd -->
                    </div>
                </div>
                
                <!-- Uitgesteld lijsten sectie - derde -->
                <div class="drop-section uitgesteld-section">
                    <h4>Postponed</h4>
                    <div class="drop-zones-row">
                        <div class="drop-zone-item" data-target="uitgesteld-wekelijks">
                            <i class="fas fa-pause-circle"></i>
                            <span>Weekly</span>
                        </div>
                        <div class="drop-zone-item" data-target="uitgesteld-maandelijks">
                            <i class="fas fa-pause-circle"></i>
                            <span>Monthly</span>
                        </div>
                        <div class="drop-zone-item" data-target="uitgesteld-3maandelijks">
                            <i class="fas fa-pause-circle"></i>
                            <span>Quarterly</span>
                        </div>
                        <div class="drop-zone-item" data-target="uitgesteld-6maandelijks">
                            <i class="fas fa-pause-circle"></i>
                            <span>Bi-annual</span>
                        </div>
                        <div class="drop-zone-item" data-target="uitgesteld-jaarlijks">
                            <i class="fas fa-pause-circle"></i>
                            <span>Yearly</span>
                        </div>
                    </div>
                </div>
                
                <!-- Opvolgen sectie - onderaan -->
                <div class="drop-section opvolgen-section">
                    <h4>Lijst</h4>
                    <div class="drop-zones-row">
                        <div class="drop-zone-item" data-target="opvolgen">
                            <i class="fas fa-clock"></i>
                            <span>Follow-up</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Validation Script - Feature 017 -->
    <script>
        // T005: Password Validation Rules Object
        const passwordValidationRules = {
            minLength: {
                test: (password) => password.length >= 8,
                message: 'Minimum 8 characters',
                element: 'req-length'
            },
            hasUppercase: {
                test: (password) => /[A-Z]/.test(password),
                message: 'At least 1 uppercase letter',
                element: 'req-uppercase'
            },
            hasDigit: {
                test: (password) => /[0-9]/.test(password),
                message: 'At least 1 digit',
                element: 'req-digit'
            },
            hasSpecialChar: {
                test: (password) => /[^A-Za-z0-9]/.test(password),
                message: 'At least 1 special character',
                element: 'req-special'
            }
        };

        // T006: Real-Time Validation Function
        function validatePasswordStrength(password) {
            const results = {};
            let allValid = true;

            for (const [ruleName, rule] of Object.entries(passwordValidationRules)) {
                const isValid = rule.test(password);
                results[ruleName] = isValid;
                if (!isValid) allValid = false;
            }

            results.isValid = allValid;
            return results;
        }

        // T007: Visual Feedback Update Function
        function updatePasswordFeedback(validationResults) {
            for (const [ruleName, rule] of Object.entries(passwordValidationRules)) {
                const element = document.getElementById(rule.element);
                if (!element) continue; // Skip if element doesn't exist

                const isValid = validationResults[ruleName];

                // Remove all state classes
                element.classList.remove('neutral', 'valid', 'invalid');

                // Add appropriate state class
                if (isValid) {
                    element.classList.add('valid');
                } else {
                    element.classList.add('invalid');
                }
            }
        }

        // T008 & T009: Event Listeners Setup
        document.addEventListener('DOMContentLoaded', function() {
            const passwordInput = document.getElementById('registerPassword');
            const submitButton = document.getElementById('registerSubmit');
            const toggleButton = document.getElementById('toggle-password-visibility');
            const toggleIcon = document.getElementById('toggle-icon');

            // T008: Input Event Listener for Real-Time Validation
            if (passwordInput && submitButton) {
                passwordInput.addEventListener('input', function() {
                    const password = this.value;
                    const validationResults = validatePasswordStrength(password);
                    updatePasswordFeedback(validationResults);

                    // Enable/disable submit button based on validation
                    submitButton.disabled = !validationResults.isValid;
                });
            }

            // T009: Show/Hide Password Toggle Function
            if (toggleButton && passwordInput && toggleIcon) {
                toggleButton.addEventListener('click', function() {
                    if (passwordInput.type === 'password') {
                        // Show password
                        passwordInput.type = 'text';
                        toggleIcon.classList.remove('fa-eye');
                        toggleIcon.classList.add('fa-eye-slash');
                        this.setAttribute('aria-label', 'Hide password');
                        this.setAttribute('title', 'Hide password');
                    } else {
                        // Hide password
                        passwordInput.type = 'password';
                        toggleIcon.classList.remove('fa-eye-slash');
                        toggleIcon.classList.add('fa-eye');
                        this.setAttribute('aria-label', 'Show password');
                        this.setAttribute('title', 'Show password');
                    }
                });
            }
        });
    </script>

    <!-- Message Modal System -->
    <div id="message-modal-overlay" class="modal-overlay" style="display: none;">
      <div class="message-modal">
        <div class="message-header">
          <button class="btn-close-modal" aria-label="Sluit bericht">
            <i class="fas fa-times"></i>
          </button>
          <i class="message-icon fas fa-info-circle"></i>
          <h3 class="message-title"></h3>
          <span class="carousel-indicator" style="display: none;">1 / 1</span>
        </div>
        <div class="message-body">
          <div class="message-content"></div>
        </div>

        <!-- Optional action button -->
        <div class="message-button" style="display: none;"></div>

        <div class="message-actions">
          <!-- Snooze options -->
          <div class="snooze-options" style="display: none;">
            <button class="btn-snooze" data-duration="3600">Snooze 1h</button>
            <button class="btn-snooze" data-duration="14400">Snooze 4h</button>
            <button class="btn-snooze" data-duration="86400">Snooze 1d</button>
          </div>

          <!-- Dismiss -->
          <button class="btn-message-dismiss">Dismiss</button>
        </div>

        <!-- Carousel navigation (separate row at bottom) -->
        <div class="message-navigation">
          <button class="btn-prev" style="display: none;">â—€ Previous</button>
          <button class="btn-next" style="display: none;">Next â–¶</button>
        </div>
      </div>
    </div>

    <!-- Bulk Edit Modal -->
    <div id="bulkEditModal" class="modal">
        <div class="modal-content">
            <h2 id="bulkEditHeader">Edit properties for X tasks</h2>

            <div class="form-group">
                <label for="bulkEditProject">Project:</label>
                <select id="bulkEditProject">
                    <option value="">-- No change --</option>
                    <option value="null">No project</option>
                    <!-- Dynamically populated -->
                </select>
            </div>

            <div class="form-group">
                <label for="bulkEditDatum">Date:</label>
                <input type="date" id="bulkEditDatum">
            </div>

            <div class="form-group">
                <label for="bulkEditContext">Context:</label>
                <select id="bulkEditContext">
                    <option value="">-- No change --</option>
                    <option value="null">No context</option>
                    <!-- Dynamically populated -->
                </select>
            </div>

            <div class="form-group">
                <label for="bulkEditPriority">Priority:</label>
                <select id="bulkEditPriority">
                    <option value="">-- No change --</option>
                    <option value="laag">Low</option>
                    <option value="gemiddeld">Normal</option>
                    <option value="hoog">High</option>
                </select>
            </div>

            <div class="form-group">
                <label for="bulkEditTime">Estimated time (minutes):</label>
                <input type="number" id="bulkEditTime" min="0" placeholder="Optional">
            </div>

            <div class="button-group">
                <button onclick="window.bulkEditCancel()" class="secondary">Cancel</button>
                <button onclick="window.bulkEditSave()" class="primary">Save</button>
            </div>
        </div>
    </div>

    <script src="js/subscription-data.js"></script>
    <script src="app.js"></script>
    <script src="js/message-modal.js"></script>
</body>
</html>